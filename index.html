<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sistema 6¬∫ BBM</title>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;800&display=swap" rel="stylesheet">

<style>

:root{
--vermelho:#CC0000;
--azul:#003366;
--fundo:#EAF6FF;
}

body{
margin:0;
font-family:'Open Sans',sans-serif;
background:linear-gradient(135deg,#002244,#003366);
position:relative;
}

/* MARCA D'√ÅGUA GLOBAL */
body::before{
content:"";
position:fixed;
width:100%;
height:100%;
background:url('https://www.bombeiros.rs.gov.br/upload/recortes/201703/27142721_3149_GD.png') center/contain no-repeat;
opacity:0.04;
pointer-events:none;
z-index:0;
}

/* HEADER */
.header-bar{
position:fixed;
top:0;
width:100%;
background:var(--vermelho);
color:white;
display:flex;
align-items:center;
justify-content:center;
padding:12px;
font-weight:800;
letter-spacing:1px;
box-shadow:0 4px 12px rgba(0,0,0,0.4);
z-index:1000;
}

.header-bar img{
position:absolute;
left:15px;
height:40px;
}

/* LOGIN */
#loginScreen{
display:flex;
justify-content:center;
align-items:center;
min-height:100vh;
padding:120px 20px 80px 20px;
}

.login-box{
background:white;
padding:40px;
border-radius:10px;
width:320px;
text-align:center;
box-shadow:0 10px 30px rgba(0,0,0,0.3);
z-index:1;
}

input, select{
width:100%;
padding:10px;
margin:10px 0;
border-radius:5px;
border:1px solid #ccc;
}

button{
padding:10px;
background:var(--vermelho);
color:white;
border:none;
border-radius:5px;
cursor:pointer;
font-weight:bold;
}

button:hover{
background:#a80000;
}

/* SISTEMA */
#sistema{
display:none;
padding:120px 30px 80px 30px;
background:var(--fundo);
min-height:100vh;
position:relative;
z-index:1;
}

.top-bar{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:25px;
}

.logout{
background:var(--azul);
margin-left:10px;
}

.category{
margin-bottom:30px;
}

.category-title{
font-weight:800;
color:var(--vermelho);
margin-bottom:10px;
}

.link-card{
background:white;
padding:15px;
border-radius:8px;
margin-bottom:10px;
box-shadow:0 5px 15px rgba(0,0,0,0.08);
}

/* FOOTER */
.footer-global{
position:fixed;
bottom:0;
width:100%;
background:var(--azul);
color:white;
text-align:center;
padding:10px;
font-size:14px;
display:flex;
justify-content:center;
gap:30px;
flex-wrap:wrap;
z-index:1000;
}

.footer-global a{
color:white;
text-decoration:none;
font-weight:600;
}

.footer-global a:hover{
color:#CC0000;
}

/* MODAL */
#modalSenha{
display:none;
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.5);
justify-content:center;
align-items:center;
z-index:2000;
}

.modal-content{
background:white;
padding:30px;
border-radius:10px;
width:320px;
}

</style>
</head>
<body>

<div class="header-bar">
<img src="https://www.bombeiros.rs.gov.br/upload/recortes/201703/27142721_3149_GD.png">
SE√á√ÉO ADMINISTRATIVA - 6¬∫ BBM
</div>

<!-- LOGIN -->
<div id="loginScreen">
<div class="login-box">
<h2>Login</h2>
<input type="text" id="usuario" placeholder="Usu√°rio">
<input type="password" id="senha" placeholder="Senha">
<button onclick="login()">Entrar</button>
<p id="erro" style="color:red;"></p>
</div>
</div>

<!-- SISTEMA -->
<div id="sistema">

<div class="top-bar">
<h3>Usu√°rio: <span id="nomeUsuario"></span></h3>
<div>
<button id="btnAlterar" onclick="abrirAlteracao()" style="display:none;">Alterar Senha</button>
<button class="logout" onclick="logout()">Sair</button>
</div>
</div>

<div class="category" data-setor="B1">
<div class="category-title">B1 - Pessoal</div>
<div class="link-card">Escala de Servi√ßo</div>
<div class="link-card">Plano de F√©rias</div>
</div>

<div class="category" data-setor="B2">
<div class="category-title">B2 - Intelig√™ncia</div>
<div class="link-card">Distribui√ß√£o An√°lise</div>
<div class="link-card">Distribui√ß√£o Recurso</div>
</div>

<div class="category" data-setor="B3">
<div class="category-title">B3 - Opera√ß√µes</div>
<div class="link-card">Planilha B3</div>
<div class="link-card">Treinamentos</div>
</div>

<div class="category" data-setor="B4">
<div class="category-title">B4 - Log√≠stica e Patrim√¥nio</div>
<div class="link-card">Controle de Material</div>
<div class="link-card">Manuten√ß√£o</div>
</div>

</div>

<!-- MODAL ALTERAR SENHA -->
<div id="modalSenha">
<div class="modal-content">
<h3>Alterar Senha</h3>
<select id="usuarioSelecionado"></select>
<input type="password" id="novaSenha" placeholder="Nova senha">
<button onclick="salvarNovaSenha()">Salvar</button>
<button onclick="fecharModal()" style="background:#777;margin-top:5px;">Cancelar</button>
<p id="msgSenha" style="color:green;"></p>
</div>
</div>

<!-- FOOTER -->
<div class="footer-global">
<div>üìç <a href="https://share.google/cd8jwClKb7aJvgxsk" target="_blank">Santa Cruz do Sul - RS</a></div>
<div>üì± <a href="https://wa.me/5551985248047" target="_blank">WhatsApp (51) 98524-8047</a></div>
<div>‚úâÔ∏è <a href="mailto:6bbm-sadm@cbm.rs.gov.br">6bbm-sadm@cbm.rs.gov.br</a></div>
</div>

<script>

const usuarios = {
"Chefia": {senha:"admin", setor:"TODOS", nome:"Chefe SAdm"},
"B1": {senha:"123", setor:"B1", nome:"B1"},
"B2": {senha:"123", setor:"B2", nome:"B2"},
"B3": {senha:"123", setor:"B3", nome:"B3"},
"B4": {senha:"123", setor:"B4", nome:"B4"}
};

function login(){
const user=document.getElementById("usuario").value.toLowerCase().trim();
const pass=document.getElementById("senha").value.trim();

if(usuarios[user] && usuarios[user].senha===pass){
sessionStorage.setItem("usuarioLogado",user);
carregarSistema(user);
}else{
document.getElementById("erro").innerText="Usu√°rio ou senha incorretos";
}
}

function carregarSistema(user){
if(!usuarios[user]){ logout(); return; }

const setor=usuarios[user].setor;
const nome=usuarios[user].nome;

document.getElementById("loginScreen").style.display="none";
document.getElementById("sistema").style.display="block";
document.getElementById("nomeUsuario").innerText=nome+" ("+setor+")";

document.getElementById("btnAlterar").style.display =
user==="chefesadm"?"inline-block":"none";

document.querySelectorAll(".category").forEach(cat=>{
if(setor==="TODOS"){
cat.style.display="block";
}else{
cat.style.display =
cat.getAttribute("data-setor")===setor?"block":"none";
}
});
}

function logout(){
sessionStorage.clear();
location.reload();
}

window.onload=function(){
const usuarioSalvo=sessionStorage.getItem("usuarioLogado");
if(usuarioSalvo && usuarios[usuarioSalvo]){
carregarSistema(usuarioSalvo);
}
}

function abrirAlteracao(){
const select=document.getElementById("usuarioSelecionado");
select.innerHTML="";
Object.keys(usuarios).forEach(user=>{
if(user!=="chefesadm"){
let option=document.createElement("option");
option.value=user;
option.text=usuarios[user].nome;
select.appendChild(option);
}
});
document.getElementById("modalSenha").style.display="flex";
}

function fecharModal(){
document.getElementById("modalSenha").style.display="none";
document.getElementById("msgSenha").innerText="";
}

function salvarNovaSenha(){
const user=document.getElementById("usuarioSelecionado").value;
const nova=document.getElementById("novaSenha").value;
if(nova.length<3){ alert("Senha m√≠nima 3 caracteres"); return; }
usuarios[user].senha=nova;
document.getElementById("msgSenha").innerText="Senha alterada com sucesso!";
document.getElementById("novaSenha").value="";
}

</script>

</body>
</html>
